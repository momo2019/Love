(function(t){function e(e){for(var i,r,o=e[0],h=e[1],c=e[2],l=0,p=[];l<o.length;l++)r=o[l],a[r]&&p.push(a[r][0]),a[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var h=n[o];0!==a[h]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=h;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"106c":function(t,e,n){"use strict";var i=n("c8ea"),a=n.n(i);a.a},"2a16":function(t,e,n){"use strict";var i=n("3718"),a=n.n(i);a.a},3718:function(t,e,n){},"4cd5":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative",height:"100vh",width:"100vw"}},[t.pc?n("div",[n("div",{staticClass:"background"},[n("Background",{attrs:{callback:t.showBook}})],1),n("div",{staticClass:"book",style:t.display},[n("div",{staticClass:"tip"},[n("Tip")],1),t._l(t.data,function(e,i){return n("Page",{key:e.font.index+"-"+e.back.index,attrs:{isFirst:0===i,index:i,sum:t.data.length,font:e.font,back:e.back}})})],2)]):n("div",[t._v("\n    "+t._s("使用电脑打开,扣扣你了,窗口拉宽拉高点,全屏按F11。")+"\n  ")]),n("audio",{attrs:{src:"assets/music/music.mp3",controls:"",autoplay:"",loop:"",hidden:"true"}})])},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap",style:t.style,on:{click:t.handleTurn}},[t.isFirst?n("div",{staticClass:"page",staticStyle:{background:"#eadedf"}},[n("div",{staticClass:"fm",style:{backgroundImage:"url("+t.font.img+")"}}),n("div",{staticClass:"text-box"},[n("div",[t._v(t._s(t.font.title))])])]):n("div",{staticClass:"page font"},[n("div",[n("div",{staticClass:"litte-title"},[t._v(t._s(t.font.title))])]),n("div",{staticClass:"title"},[t._v("\n      "+t._s(t.font.title)+"\n    ")]),n("div",{staticClass:"content"},t._l(t.contents,function(e,i){return n("p",{key:i},[t._v(t._s(e))])}),0),n("div",{staticClass:"image",style:{backgroundImage:"url("+t.font.img+")"}}),n("div",{staticClass:"index"},[t._v(t._s(t.font.index))])]),n("div",{staticClass:"page back",style:{backgroundImage:"url("+t.back.img+")"}})])},o=[],h=(n("28a5"),n("c5f6"),{name:"Page",props:{isFirst:{type:Boolean},index:{type:Number},sum:{type:Number},font:{type:Object},back:{type:Object}},data:function(){return{style:{transform:"perspective(1000px) rotateY(0deg)",zIndex:0},flag:!0,contents:[]}},created:function(){this.style.zIndex=this.sum-this.index,this.handleContent()},methods:{handleTurn:function(){var t=this;if(!this.flag)return!1;"perspective(1000px) rotateY(0deg)"===this.style.transform?(this.style.transform="perspective(1000px) rotateY(-180deg)",this.flag=!1,setTimeout(function(e){t.style.zIndex=t.index},900),setTimeout(function(e){t.flag=!0},3e3)):(this.style.transform="perspective(1000px) rotateY(0deg)",this.flag=!1,setTimeout(function(e){t.style.zIndex=t.sum-t.index},900),setTimeout(function(e){t.flag=!0},3e3))},handleContent:function(){var t=this.font.content;if(t){var e=t.split("_");this.contents=e}}}}),c=h,u=(n("2a16"),n("2877")),l=Object(u["a"])(c,r,o,!1,null,"94447416",null),p=l.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{ref:"cvs",staticStyle:{height:"100% width: 100%"}})},f=[],g=n("7618"),m=(n("6c7b"),{name:"Background",props:{callback:{type:Function}},data:function(){return{shape:{},flag:!1}},mounted:function(){this.init(),this.start()},methods:{start:function(){var t=this;window.location.href;t.shape.Drawing.init("cvs"),t.shape.ShapeBuilder.init(),t.shape.UI.init(),t.shape.UI.simulate("也不知道说啥|将就着看|#icon love|点一下||"),t.shape.Drawing.loop(function(){t.shape.Shape.render()})},init:function(){this.shape.Color=this.createColor(),this.shape.Point=this.createPoint(),this.shape.Drawing=this.createDrawing(),this.shape.Dot=this.createDot(),this.shape.ShapeBuilder=this.createShapeBuilder(),this.shape.Shape=this.createShape(),this.shape.UI=this.createUI()},createDot:function(){var t=this,e=function(e,n){this.p=new t.shape.Point({x:e,y:n,z:5,a:1,h:0}),this.e=.07,this.s=!0,this.c=new t.shape.Color(255,255,255,this.p.a),this.t=this.clone(),this.q=[]};return e.prototype={clone:function(){return new t.shape.Point({x:this.x,y:this.y,z:this.z,a:this.a,h:this.h})},_draw:function(){this.c.a=this.p.a,t.shape.Drawing.drawCircle(this.p,this.c)},_moveTowards:function(t){var e=this.distanceTo(t,!0),n=e[0],i=e[1],a=e[2],s=this.e*a;if(-1===this.p.h)return this.p.x=t.x,this.p.y=t.y,!0;if(a>1)this.p.x-=n/a*s,this.p.y-=i/a*s;else{if(!(this.p.h>0))return!0;this.p.h--}return!1},_update:function(){var e,n;this._moveTowards(this.t)&&(e=this.q.shift(),e?(this.t.x=e.x||this.p.x,this.t.y=e.y||this.p.y,this.t.z=e.z||this.p.z,this.t.a=e.a||this.p.a,this.p.h=e.h||0):this.s?(this.p.x-=Math.sin(3.142*Math.random()),this.p.y-=Math.sin(3.142*Math.random())):this.move(new t.shape.Point({x:this.p.x+50*Math.random()-25,y:this.p.y+50*Math.random()-25}))),n=this.p.a-this.t.a,this.p.a=Math.max(.1,this.p.a-.05*n),n=this.p.z-this.t.z,this.p.z=Math.max(1,this.p.z-.05*n)},distanceTo:function(t,e){var n=this.p.x-t.x,i=this.p.y-t.y,a=Math.sqrt(n*n+i*i);return e?[n,i,a]:a},move:function(t,e){(!e||e&&this.distanceTo(t)>1)&&this.q.push(t)},render:function(){this._update(),this._draw()}},e},createColor:function(){var t=function(t,e,n,i){this.r=t,this.g=e,this.b=n,this.a=i};return t.prototype={render:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}},t},createPoint:function(){var t=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.a=t.a,this.h=t.h};return t},createDrawing:function(){var t=this,e=function(){var e,n,i,a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};return{init:function(i){e=t.$refs[i],n=e.getContext("2d"),this.adjustCanvas(),window.addEventListener("resize",function(){t.Drawing.adjustCanvas()})},loop:function(t){i=i||t,this.clearFrame(),i(),a.call(window,this.loop.bind(this))},adjustCanvas:function(){e.width=window.innerWidth,e.height=window.innerHeight},clearFrame:function(){n.clearRect(0,0,e.width,e.height)},getArea:function(){return{w:e.width,h:e.height}},drawCircle:function(t,e){n.fillStyle=e.render(),n.beginPath(),n.arc(t.x,t.y,t.z,0,2*Math.PI,!0),n.closePath(),n.fill()}}}();return e},createShape:function(){var t=this,e=function(){var e=[],n=0,i=0,a=0,s=0;function r(){var e=t.shape.Drawing.getArea();a=e.w/2-n/2,s=e.h/2-i/2}return{shuffleIdle:function(){for(var n=t.shape.Drawing.getArea(),i=0;i<e.length;i++)e[i].s||e[i].move({x:Math.random()*n.w,y:Math.random()*n.h})},switchShape:function(o,h){var c,u=t.shape.Drawing.getArea(),l=0,p=0;if(n=o.w,i=o.h,r(),o.dots.length>e.length)for(c=o.dots.length-e.length,l=1;l<=c;l++)e.push(new t.shape.Dot(u.w/2,u.h/2));l=0;while(o.dots.length>0)p=Math.floor(Math.random()*o.dots.length),e[l].e=h?.25:e[l].s?.14:.11,e[l].s?e[l].move(new t.shape.Point({z:20*Math.random()+10,a:Math.random(),h:18})):e[l].move(new t.shape.Point({z:5*Math.random()+5,h:h?18:30})),e[l].s=!0,e[l].move(new t.shape.Point({x:o.dots[p].x+a,y:o.dots[p].y+s,a:1,z:5,h:0})),o.dots=o.dots.slice(0,p).concat(o.dots.slice(p+1)),l++;for(p=l;p<e.length;p++)e[p].s&&(e[p].move(new t.shape.Point({z:20*Math.random()+10,a:Math.random(),h:20})),e[p].s=!1,e[p].e=.04,e[p].move(new t.shape.Point({x:Math.random()*u.w,y:Math.random()*u.h,a:.3,z:4*Math.random(),h:0})))},render:function(){for(var t=0;t<e.length;t++)e[t].render()}}}();return e},createUI:function(){var t=this,e=function(){t.$refs["cvs"];var e,n,i,a,s=30,r=[],o="#";function h(t){var e=t.getHours(),n=t.getMinutes();return n=n<10?"0"+n:n,e+":"+n}function c(t){return t&&t.split(" ")[1]}function u(t){return t=t&&t.split(" ")[0],t&&t[0]===o&&t.substring(1)}function l(t,i,a,s){clearInterval(e),n=s?a:1,t(n),(!a||!s&&n<a||s&&n>0)&&(e=setInterval(function(){n=s?n-1:n+1,t(n),(!s&&a&&n===a||s&&0===n)&&clearInterval(e)},i))}function p(n){clearInterval(e),r=[],a=null,n&&t.shape.Shape.switchShape(t.shape.ShapeBuilder.letter(""))}function d(e){var n,i;r="object"===Object(g["a"])(e)?e:r.concat(e.split("|")),l(function(){switch(i=r.shift(),n=u(i),e=c(i),n){case"countdown":e=parseInt(e,10)||10,e=e>0?e:10,l(function(e){0===e?0===r.length?t.shape.Shape.switchShape(t.shape.ShapeBuilder.letter("")):d(r):t.shape.Shape.switchShape(t.shape.ShapeBuilder.letter(e),!0)},1e3,e,!0);break;case"rectangle":e=e&&e.split("x"),e=e&&2===e.length?e:[s,s/2],t.shape.Shape.switchShape(t.shape.ShapeBuilder.rectangle(Math.min(s,parseInt(e[0],10)),Math.min(s,parseInt(e[1],10))));break;case"circle":e=parseInt(e,10)||s,e=Math.min(e,s),t.shape.Shape.switchShape(t.shape.ShapeBuilder.circle(e));break;case"time":var p=h(new Date);r.length>0?t.shape.Shape.switchShape(t.shape.ShapeBuilder.letter(p)):l(function(){p=h(new Date),p!==a&&(a=p,t.shape.Shape.switchShape(t.shape.ShapeBuilder.letter(a)))},1e3);break;case"icon":t.shape.ShapeBuilder.imageFile("assets/"+e+".png",function(e){t.shape.Shape.switchShape(e)});break;default:t.shape.Shape.switchShape(t.shape.ShapeBuilder.letter(i[0]===o?"What?":i))}},2e3,r.length)}function f(){window.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(function(){t.shape.Shape.shuffleIdle(),p(!0)},500)}),window.addEventListener("click",function(){t.flag&&(t.callback(),t.flag=!1)})}return{init:function(){f()},simulate:function(t){d(t)}}}();return e},createShapeBuilder:function(){var t=this,e=function(){var e=13,n=document.createElement("canvas"),i=n.getContext("2d"),a=500,s="Avenir, Helvetica Neue, Helvetica, Arial, sans-serif";function r(){n.width=Math.floor(window.innerWidth/e)*e,n.height=Math.floor(window.innerHeight/e)*e,i.fillStyle="red",i.textBaseline="middle",i.textAlign="center"}function o(){for(var a=i.getImageData(0,0,n.width,n.height).data,s=[],r=0,o=0,h=n.width,c=n.height,u=0,l=0,p=0;p<a.length;p+=4*e)a[p+3]>0&&(s.push(new t.shape.Point({x:r,y:o})),u=r>u?r:u,l=o>l?o:l,h=r<h?r:h,c=o<c?o:c),r+=e,r>=n.width&&(r=0,o+=e,p+=4*e*n.width);return{dots:s,w:u+h,h:l+c}}function h(t){i.font="bold "+t+"px "+s}function c(t){return!isNaN(parseFloat(t))&&isFinite(t)}return{init:function(){r(),window.addEventListener("resize",r)},imageFile:function(e,a){var s=new Image,r=t.shape.Drawing.getArea();s.onload=function(){i.clearRect(0,0,n.width,n.height),i.drawImage(this,0,0,.6*r.h,.6*r.h),a(o())},s.onerror=function(e){a(t.shape.ShapeBuilder.letter("What?"))},s.src=e},circle:function(t){var a=Math.max(0,t)/2;return i.clearRect(0,0,n.width,n.height),i.beginPath(),i.arc(a*e,a*e,a*e,0,2*Math.PI,!1),i.fill(),i.closePath(),o()},letter:function(e){var s=0;return"点一下"===e&&setTimeout(function(){t.flag=!0},3500),h(a),s=Math.min(a,n.width/i.measureText(e).width*.8*a,n.height/a*(c(e)?1:.45)*a),h(s),i.clearRect(0,0,n.width,n.height),i.fillText(e,n.width/2,n.height/2),o()},rectangle:function(n,i){for(var a=[],s=e*n,r=e*i,o=0;o<r;o+=e)for(var h=0;h<s;h+=e)a.push(new t.shape.Point({x:h,y:o}));return{dots:a,w:s,h:r}}}}();return e}}}),v=m,w=Object(u["a"])(v,d,f,!1,null,null,null),y=w.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100%","font-size":"0px"}},[n("div",{staticClass:"tip-box left"},[n("div",{staticClass:"tip-content tip1"})]),n("div",{staticClass:"tip-box right"},[n("div",{staticClass:"tip-content tip2"})])])}],_={name:"Tip"},S=_,k=(n("e8bc"),Object(u["a"])(S,b,x,!1,null,"647b8802",null)),M=k.exports,C={name:"app",components:{Page:p,Background:y,Tip:M},data:function(){return{data:[{font:{title:"很高心遇见你",img:"assets/fm.jpg"},back:{img:"assets/back1.jpg"}},{font:{title:"我想给你写一封情书",content:"我想给你写一封情书_在阳光灿烂的午后_在长满爬山虎的窗前_在风灌满两袖的麦田_在橘子味汽水的夏天_提笔却不知从何记起",index:"001",img:"assets/page1.png"},back:{img:"assets/back2.png"}},{font:{title:"山水一程 三生有幸",content:"我很想要过这样一个温暖的冬天_有一场踩起来嘎吱嘎吱的大雪_有路灯下昏黄得模糊的暖光_有热烘烘的烤地瓜_有一壶暖胃的酒有本想看的书_有窗上的雾有大毛毯_还有你一房~两人~三餐~四季",index:"002",img:"assets/page2.jpg"},back:{img:"assets/back3.jpg"}},{font:{title:"Emmmmmm",content:"写文字比写代码还难_前面两段都是俺抄的_嘻嘻_再翻一页",index:"003",img:""},back:{img:""}}],display:{opacity:0,zIndex:-1},pc:!0}},mounted:function(){var t=this;(document.body.clientWidth<768||document.body.clientHeight<600)&&(t.pc=!1),window.addEventListener("resize",function(){document.body.clientWidth<768||document.body.clientHeight<600?t.pc=!1:t.pc=!0})},methods:{showBook:function(){this.display.opacity=1,this.display.zIndex=1}}},z=C,I=(n("106c"),Object(u["a"])(z,a,s,!1,null,"2d4bbfe6",null)),P=I.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(P)}}).$mount("#app")},c8ea:function(t,e,n){},e8bc:function(t,e,n){"use strict";var i=n("4cd5"),a=n.n(i);a.a}});
//# sourceMappingURL=app.0138e75e.js.map